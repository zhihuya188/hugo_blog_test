---
title: linux命令笔记
tags:
  - linux
categories:
  - 专业
  - linux
keywords: 常用linux命令
abbrlink: d6fb59cf
date: 2019-08-14 21:41:48
---
## 说明

linux命令笔记，记录学习过程

<!--more-->

## 目标

- 熟练使用 Linux常用的命令
- ls
- clear
- cd
- pwd
- mkdir
- touch
- rm
- cp
- mv
- tree
- chmod
- find
- grep
- 重定向
- 软连接、硬链接
- 压缩
- shutdown
- reboot
- who
- exit
- passwd
- sudo

### > 查看文件信息：ls

ls常用参数：

| 参数  | 含义                     |
|-----|------------------------|
| \-a | 显示指定目录下所有子目录与文件，包括隐藏文件 |
| \-l | 以列表方式显示文件的详细信息         |
| \-h | 配合 \-l 以人性化的方式显示文件大小   |

> 与DOS下的文件操作类似，在Unix/Linux系统中，也同样允许使用特殊字符来同时引用多个文件名，这些特殊字符被称为通配符。

常用选项说明：

| 通配符           | 含义                                                             |
|---------------|----------------------------------------------------------------|
| \*            | 文件代表文件名中所有字符                                                   |
| ls te\*       | 查找以te开头的文件                                                     |
| ls \*html     | 查找结尾为html的文件                                                   |
| ？             | 代表文件名中任意一个字符                                                   |
| ls ?\.c       | 只找第一个字符任意，后缀为\.c的文件                                            |
| ls a\.?       | 只找只有3个字符，前2字符为a\.，最后一个字符任意的文件                                  |
| \[\]          | \[”和“\]”将字符组括起来，表示可以匹配字符组中的任意一个。“\-”用于表示字符范围。                  |
| \[abc\]       | 匹配a、b、c中的任意一个                                                  |
| \[a\-f\]      | 匹配从a到f范围内的的任意一个字符                                              |
| ls \[a\-f\]\* | 找到从a到f范围内的的任意一个字符开头的文件                                         |
| ls a\-f       | 查找文件名为a\-f的文件,当“\-”处于方括号之外失去通配符的作用                             |
| \\            | 如果要使通配符作为普通字符使用，可以在其前面加上转义字符。“?”和“\*”处于方括号内时不用使用转义字符就失去通配符的作用。 |
| ls \\\*a      | 查找文件名为\*a的文件                                                   |

### > 删除文件：rm

常用选项说明：

| 参数  | 含义                       |
|-----|--------------------------|
| \-i | 以进行交互式方式执行               |
| \-f | 强制删除，忽略不存在的文件，无需提示       |
| \-r | 递归地删除目录下的内容，删除文件夹时必须加此参数 |

### > 拷贝：cp

常用选项说明：

| 选项  | 含义                                               |
|-----|--------------------------------------------------|
| \-a | 该选项通常在复制目录时使用，它保留链接、文件属性，并递归地复制目录，简单而言，保持文件原有属性。 |
| \-f | 已经存在的目标文件而不提示                                    |
| \-i | 交互式复制，在覆盖目标文件之前将给出提示要求用户确认                       |
| \-r | 若给出的源文件是目录文件，则cp将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名。 |
| \-v | 显示拷贝进度                                           |

### > mv：移动、重命名

常用选项说明：

| 选项  | 含义                                                      |
|-----|---------------------------------------------------------|
| \-f | 禁止交互式操作，如有覆盖也不会给出提示                                     |
| \-i | 确认交互方式操作，如果mv操作将导致对已存在的目标文件的覆盖，系统会询问是否重写，要求用户回答以避免误覆盖文件 |
| \-v | 显示移动进度                                                  |

### > 输出重定向命令：>

Linux允许将命令执行结果重定向到一个文件，本应显示在终端上的内容保存到指定文件中。

如：ls > test.txt ( test.txt 如果不存在，则创建，存在则覆盖其内容 )

> 注意： >输出重定向会覆盖原来的内容，>>输出重定向则会追加到文件的尾部。

### > 分屏显示：more

查看内容时，在信息过长无法在一屏上显示时，会出现快速滚屏，使得用户无法看清文件的内容，此时可以使用`more`命令，每次只显示一页，按下空格键可以显示下一页，按下q键退出显示，按下h键可以获取帮助。

### > 管道：|

管道：一个命令的输出可以通过管道做为另一个命令的输入。

管道我们可以理解现实生活中的管子，管子的一头塞东西进去，另一头取出来，这里“ | ”的左右分为两端，左端塞东西(写)，右端取东西(读)。

### > 建立链接文件：ln

Linux链接文件类似于Windows下的快捷方式。

链接文件分为软链接和硬链接。

软链接：软链接不占用磁盘空间，源文件删除则软链接失效。

硬链接：硬链接只能链接普通文件，不能链接目录。

使用格式：

- ln 源文件 链接文件
- ln -s 源文件 链接文件

> 如果没有-s选项代表建立一个硬链接文件，两个文件占用相同大小的硬盘空间，即使删除了源文件，链接文件还是存在，所以-s选项是更常见的形式。
> 
> 注意：如果软链接文件和源文件不在同一个目录，源文件要使用绝对路径，不能使用相对路径。

### > 查看或者合并文件内容：cat

### > 文本搜索：grep

Linux系统中grep命令是一种强大的文本搜索工具，grep允许对文本文件进行模式查找。如果找到匹配模式， grep打印包含模式的所有行。

grep一般格式为：

`grep [-选项] ‘搜索内容串’文件名`

在grep命令中输入字符串参数时，最好引号或双引号括起来。

例如：

`grep 'a' 1.txt`

常用选项说明：

| 选项  | 含义                                                      |
|-----|---------------------------------------------------------|
| \-f | 禁止交互式操作，如有覆盖也不会给出提示                                     |
| \-i | 确认交互方式操作，如果mv操作将导致对已存在的目标文件的覆盖，系统会询问是否重写，要求用户回答以避免误覆盖文件 |
| \-v | 显示移动进度                                                  |

grep搜索内容串可以是正则表达式。

正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。

grep常用正则表达式：

| 参数               | 含义                                                                                         |
|------------------|--------------------------------------------------------------------------------------------|
| ^a               | 行首,搜寻以 m 开头的行；grep \-n '^a' 1\.txt                                                         |
| ke$              | 行尾,搜寻以 ke 结束的行；grep \-n 'ke$' 1\.txt                                                       |
| \[Ss\]igna\[Ll\] | 匹配 \[\] 里中一系列字符中的一个；搜寻匹配单词signal、signaL、Signal、SignaL的行；grep \-n '\[Ss\]igna\[Ll\]' 1\.txt |
| \.               | \(点\)匹配一个非换行符的字符；匹配 e 和 e 之间有任意一个字符，可以匹配 eee，eae，eve，但是不匹配 ee，eaae；grep \-n 'e\.e' 1\.txt  |

### > 查找文件：find

find命令功能非常强大，通常用来在特定的目录下搜索符合条件的文件，也可以用来搜索特定用户属主的文件。

常用用法：

| 命令                               | 含义                     |
|----------------------------------|------------------------|
| find \./ \-name test\.sh         | 查找当前目录下所有名为test\.sh的文件 |
| find \./ \-name '\*\.sh'         | 查找当前目录下所有后缀为\.sh的文件    |
| find \./ \-name "\[A\-Z\]\*"     | 查找当前目录下所有以大写字母开头的文件    |
| find  /tmp  \-size   2M          | 查找在/tmp 目录下等于2M的文件     |
| find  /tmp  \-size  \+2M         | 查找在/tmp 目录下大于2M的文件     |
| find  /tmp  \-size  \-2M         | 查找在/tmp 目录下小于2M的文件     |
| find \./ \-size \+4k \-size \-5M | 查找当前目录下大于4k，小于5M的文件    |
| find \./ \-perm 777              | 查找当前目录下权限为 777 的文件或目录  |

### > 归档管理：tar

计算机中的数据经常需要备份，tar是Unix/Linux中最常用的备份工具，此命令可以把一系列文件归档到一个大文件中，也可以把档案文件解开以恢复数据。

tar使用格式 tar [参数] 打包文件名 文件

tar命令很特殊，其参数前面可以使用“-”，也可以不使用。

常用参数：

| 参数  | 含义                               |
|-----|----------------------------------|
| \-c | 生成档案文件，创建打包文件                    |
| \-v | 列出归档解档的详细过程，显示进度                 |
| \-f | 指定档案文件名称，f后面一定是\.tar文件，所以必须放选项最后 |
| \-t | 列出档案中包含的文件                       |
| \-x | 解开档案文件                           |

> 注意：除了f需要放在参数的最后，其它参数的顺序任意。

### > 文件压缩解压：gzip

tar与gzip命令结合使用实现文件打包、压缩。 tar只负责打包文件，但不压缩，用gzip压缩tar打包后的文件，其扩展名一般用xxxx.tar.gz。

gzip使用格式如下：

gzip  [选项]  被压缩文件

常用选项：

| 选项  | 含义      |
|-----|---------|
| \-d | 解压      |
| \-r | 压缩所有子目录 |

tar这个命令并没有压缩的功能，它只是一个打包的命令，但是在tar命令中增加一个选项(-z)可以调用gzip实现了一个压缩的功能，实行一个先打包后压缩的过程。

压缩用法：tar cvzf 压缩包包名 文件1 文件2 ...

	-z ：指定压缩包的格式为：file.tar.gz

```
# 当前路径下所有的文件以及文件夹打包并压缩到test.tar.gz文件中
tar -zcvf test.tar.gz *
```
解压用法： tar zxvf 压缩包包名

	-z:指定压缩包的格式为：file.tar.gz
	tar -zxvf test.tar.gz
解压到指定目录：-C （大写字母“C”）

### > 查看命令位置：which

```
# 如果找到显示这个命令的路径
abcpythontab@Ubuntu:~/Desktop/test$ which ls
/bin/ls

```

### > 修改文件权限：chmod

chmod 修改文件权限有两种使用格式：字母法与数字法。

字母法：chmod u/g/o/a +/-/= rwx 文件

| \[ u/g/o/a \] | 含义                                     |
|---------------|----------------------------------------|
| u             | user 表示该文件的所有者                         |
| g             | group 表示与该文件的所有者属于同一组\( group \)者，即用户组 |
| o             | other 表示其他以外的人                         |
| a             | all 表示这三者皆是                            |

| \[ \+\-= \] | 含义   |
|-------------|------|
| \+          | 增加权限 |
| \-          | 撤销权限 |
| =           | 设定权限 |

| rwx | 含义                                               |
|-----|--------------------------------------------------|
| r   | read 表示可读取，对于一个目录，如果没有r权限，那么就意味着不能通过ls查看这个目录的内容。 |
| w   | write 表示可写入，对于一个目录，如果没有w权限，那么就意味着不能在目录下创建新的文件。   |
| x   | excute 表示可执行，对于一个目录，如果没有x权限，那么就意味着不能通过cd进入这个目录。  |

数字法：“rwx” 这些权限也可以用数字来代替

| 字母 | 说明               |
|----|------------------|
| r  | 读取权限，数字代号为 "4"   |
| w  | 写入权限，数字代号为 "2"   |
| x  | 执行权限，数字代号为 "1"   |
| \- | 不具任何权限，数字代号为 "0" |

如执行：chmod u=rwx,g=rx,o=r filename 就等同于：chmod u=7,g=5,o=4 filename

chmod 751 file：

- 文件所有者：读、写、执行权限
- 同组用户：读、执行的权限
- 其它用户：执行的权限

> 注意：如果想递归所有目录加上相同权限，需要加上参数“ -R ”。 如：chmod 777 test/ -R 递归 test 目录下所有文件加 777 权限

### > 切换到管理员账号

```
# 查看当前用户
abcpythontab@Ubuntu:~/Desktop/test$ whoami
abcpythontab
# 切换root用户
abcpythontab@Ubuntu:~/Desktop/test$ sudo -s
[sudo] password for abcpythontab: 
root@Ubuntu:~/Desktop/test# whoami
root
root@Ubuntu:~/Desktop/test#
```
### > 创建用户

创建用户有两条命令：adduer和useradd，对应着两条删除用户的命令：deluser和userdel。 
这两种命令之间的区别： 
adduser：会自动为创建的用户指定主目录、系统shell版本，会在创建时输入用户密码。 
useradd：需要使用参数选项指定上述基本设置，如果不使用任何参数，则创建的用户无密码、无主目录、没有指定shell版本。

---------------------
版权声明：本文为CSDN博主「taolusi」的原创文章，遵循CC 4.0 by-sa版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/taolusi/article/details/81304057

#### adduser
```
abcpythontab@Ubuntu:~$ sudo adduser python
Adding user `python' ...
Adding new group `python' (1002) ...
Adding new user `python' (1001) with group `python' ...
Creating home directory `/home/python' ...
Copying files from `/etc/skel' ...
Enter new UNIX password: 
Retype new UNIX password: 
passwd: password updated successfully
Changing the user information for python
Enter the new value, or press ENTER for the default
	Full Name []: python
	Room Number []: 
	Work Phone []: 
	Home Phone []: 
	Other []: 
Is the information correct? [Y/n] y
```
> 这样在创建用户名时，就创建了用户的主目录以及密码

#### useradd

> 注意： 在使用useradd命令创建新用户时，不会为用户创建主目录，不会为用户指定shell版本，不会为用户创建密码。



不使用任何参数选项创建用户：`sudo useradd tt`

为用户指定登录密码：`sudo passwd tt `

为用户指定命令解释程序(通常为/bin/bash)：`sudo usermod -s /bin/bash tt`

为用户指定用户主目录：`sudo usermod -d /home/tt tt`

为用户指定参数的useradd命令：

常用命令行选项：

-d： 指定用户的主目录

-m： 如果存在不再创建，但是此目录并不属于新创建用户；如果主目录不存在，则强制创建； -m和-d一块使用。

-s： 指定用户登录时的shell版本

-M： 不创建主目录

例如：`sudo useradd -d "/home/tt" -m -s "/bin/bash" tt`

解释：

` -d '/home/tt'` ：就是指定/home/tt为主目录 

-m 就是如果`/home/tt`不存在就强制创建
    
-s 就是指定shell版本

修改用户密码：`sudo passwd tt` 

### > 删除用户

1. deluser
只删除用户：sudo deluser tt 
输出显示：
```
正在删除用户 'tt'...
警告：组"tt"没有其他成员了。
完成。
```
连同用户的主目录和邮箱一起删除：`sudo deluser --remove-home tt` 

输出显示：
```
正在寻找要备份或删除的文件...
正在删除文件...
正在删除用户 'tt'...
警告：组"tt"没有其他成员了。
完成。
```
连同用户拥有的所有文件删除：`sudo deluser --remove-all-files tt`

2. userdel

只删除用户：sudo userdel tt

连同用户主目录一起删除：`sudo derlser -r tt` 

如果创建时主目录已经存在，即主目录不属于当前要删除的用户，则无法删除主目录。

3. 相关文件

```
/etc/passwd - 使 用 者 帐 号 资 讯，可以查看用户信息
/etc/shadow - 使 用 者 帐 号 资 讯 加 密
/etc/group - 群 组 资 讯
/etc/default/useradd - 定 义 资 讯
/etc/login.defs - 系 统 广 义 设 定
/etc/skel - 内 含 定 义 档 的 目 录
```
可以这样打开来查看：`cat /etc/passwd`

### > 查看登录用户：who

who命令用于查看当前所有登录系统的用户信息。

常用选项：

| 选项             | 含义                                 |
| ---------------- | ------------------------------------ |
| \-q或\-\-count   | 只显示用户的登录账号和登录用户的数量 |
| \-u或\-\-heading | 显示列标题                           |

### > 关机重启：reboot | shutdown | init

| 命令               | 含义                                       |
| ------------------ | ------------------------------------------ |
| reboot             | 重新启动操作系统                           |
| shutdown –r now    | 重新启动操作系统，shutdown会给别的用户提示 |
| shutdown \-h now   | 立刻关机，其中now相当于时间为0的状态       |
| shutdown \-h 20:25 | 系统在今天的20:25 会关机                   |
| shutdown \-h \+10  | 系统再过十分钟后自动关机                   |

